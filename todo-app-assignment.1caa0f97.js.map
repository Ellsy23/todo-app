{"version":3,"sources":["index.js"],"names":["TodoApp","appId","classNames","generateTodoEl","_classCallCheck","_classPrivateMethodInitSpec","_exception","_attachClearAllHandler","_attachDeleteHandler","_attachAddHandlers","_renderRemainCount","_registerComponents","_registerApp","_classPrivateMethodGet","_registerApp2","call","_registerComponents2","_renderRemainCount2","_createClass","key","value","_attachAddHandlers2","_attachDeleteHandler2","_attachClearAllHandler2","$app","document","getElementById","_exception2","type","payload","id","_this","excepts","Set","Object","entries","forEach","_ref","_ref2","_slicedToArray","fieldName","className","has","node","querySelector","concat","$remainCount","textContent","$todos","children","length","_this2","add","content","$addInput","trim","todo","insertBefore","$addButton","addEventListener","e","isComposing","_this3","_ref3","target","classList","contains","$deleteButton","closest","$todo","remove","_this4","$clearButton","innerHTML","_ref4","Error","li","createElement","p","button","append","active"],"mappings":"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","file":"todo-app-assignment.1caa0f97.js","sourceRoot":"..","sourcesContent":["/**\n * @typedef {Object} ClassNames\n * @property {string} $todos\n * @property {string} $todo\n * @property {string} $addInput\n * @property {string} $addButton\n * @property {string} $deleteButton\n * @property {string} $clearButton\n * @property {string} $remainCount\n */\n/**\n * @typedef {function} generateTodoEl\n * @param {string} content\n * @return {HTMLElement}\n */\n/**\n * @class\n * @property {() => void} active\n */\nclass TodoApp {\n  /**\n   * @param {string} appId - components classNames\n   * @param {ClassNames} classNames - components classNames\n   * @param {generateTodoEl} generateTodoEl - todo element generator\n   */\n  constructor(appId, classNames, generateTodoEl) {\n    this.classNames = classNames;\n    this.generateTodoEl = generateTodoEl;\n    this.#registerApp(appId);\n    this.#registerComponents(classNames);\n    this.#renderRemainCount();\n  }\n\n  active() {\n    this.#attachAddHandlers();\n    this.#attachDeleteHandler();\n    this.#attachClearAllHandler();\n  }\n\n  #registerApp(appId) {\n    this.$app = document.getElementById(appId);\n\n    if (!this.$app) {\n      this.#exception({\n        type: 'APP_NOT_FOUND',\n        payload: { id: appId },\n      });\n    }\n  }\n\n  #registerComponents(classNames) {\n    const excepts = new Set(['$todo', '$deleteButton']);\n\n    Object.entries(classNames).forEach(([fieldName, /*String*/ className]) => {\n      if (excepts.has(fieldName)) return;\n\n      const node = this.$app.querySelector(`.${className}`);\n\n      if (!node) {\n        this.#exception({\n          type: 'NODE_NOT_FOUND',\n          payload: { className },\n        });\n      }\n\n      this[fieldName] = node;\n    });\n  }\n\n  #renderRemainCount() {\n    this.$remainCount.textContent = `${this.$todos.children.length}`;\n  }\n\n  #attachAddHandlers() {\n    const add = () => {\n      const content = this.$addInput.value.trim();\n      if (!content) return;\n\n      const todo = this.generateTodoEl(content);\n      this.$todos.insertBefore(todo, this.$todos.children[0]);\n\n      this.$addInput.value = '';\n      this.#renderRemainCount();\n    };\n\n    this.$addButton.addEventListener('click', add);\n    this.$addInput.addEventListener('keydown', e => {\n      if (e.key === 'Enter' && !e.isComposing) {\n        add();\n      }\n    });\n  }\n  #attachDeleteHandler() {\n    this.$todos.addEventListener('click', ({ target }) => {\n      if (!target.classList.contains(this.classNames.$deleteButton)) return;\n\n      const todo = target.closest(`.${this.classNames.$todo}`);\n      if (!todo) return;\n\n      todo.remove();\n      this.#renderRemainCount();\n    });\n  }\n\n  #attachClearAllHandler() {\n    this.$clearButton.addEventListener('click', () => {\n      this.$todos.innerHTML = '';\n      this.$addInput.value = '';\n      this.#renderRemainCount();\n    });\n  }\n\n  #exception({ type, payload }) {\n    switch (type) {\n      case 'APP_NOT_FOUND': {\n        throw new Error(`App node that maps to id \"${payload.id}\" not found.`);\n      }\n      case 'NODE_NOT_FOUND': {\n        throw new Error(`Component node that maps to className \"${payload.className}\" not found.`);\n      }\n    }\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  /** @type {ClassNames} */\n  const classNames = {\n    $todos: 'todos',\n    $todo: 'todo',\n    $addButton: 'add-button',\n    $addInput: 'add-input',\n    $deleteButton: 'delete-button',\n    $clearButton: 'clear-button',\n    $remainCount: 'remain-tasks-count',\n  };\n\n  /** @type {generateTodoEl} */\n  const generateTodoEl = content => {\n    const li = document.createElement('li');\n    li.className = classNames.$todo;\n\n    const p = document.createElement('p');\n    p.textContent = content;\n\n    const button = document.createElement('button');\n    button.className = classNames.$deleteButton;\n\n    li.append(p, button);\n    return li;\n  };\n\n  const todoApp = new TodoApp('todoApp', classNames, generateTodoEl);\n  todoApp.active();\n});\n"]}