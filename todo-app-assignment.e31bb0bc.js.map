{"version":3,"sources":["index.js"],"names":["TodoApp","appId","classNames","generateTodoEl","_classCallCheck","_classPrivateMethodInitSpec","_exception","_attachClearAllHandler","_attachDeleteHandler","_attachAddHandlers","_renderRemainCount","_registerComponents","_registerApp","_classPrivateMethodGet","_registerApp2","call","_registerComponents2","_renderRemainCount2","_createClass","key","value","active","_attachAddHandlers2","_attachDeleteHandler2","_attachClearAllHandler2","$app","document","getElementById","_exception2","type","payload","id","_this","excepts","Set","Object","entries","forEach","_ref","_ref2","_slicedToArray","fieldName","className","has","node","querySelector","concat","$remainCount","textContent","$todos","children","length","_this2","add","content","$addInput","trim","todo","insertBefore","$addButton","addEventListener","e","isComposing","_this3","_ref3","target","classList","contains","$deleteButton","closest","$todo","remove","_this4","$clearButton","innerHTML","_ref4","Error","li","createElement","p","button","append","todoApp"],"mappings":"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","file":"todo-app-assignment.e31bb0bc.js","sourceRoot":"..","sourcesContent":["/**\n * @typedef {Object} ClassNames\n * @property {string} $todos\n * @property {string} $todo\n * @property {string} $addInput\n * @property {string} $addButton\n * @property {string} $deleteButton\n * @property {string} $clearButton\n * @property {string} $remainCount\n */\n/**\n * @typedef {function} generateTodoEl\n * @param {string} content\n * @return {HTMLElement}\n */\n/**\n * @class\n * @property {() => void} active\n */\nclass TodoApp {\n  /**\n   * @param {string} appId - components classNames\n   * @param {ClassNames} classNames - components classNames\n   * @param {generateTodoEl} generateTodoEl - todo element generator\n   */\n  constructor(appId, classNames, generateTodoEl) {\n    this.classNames = classNames;\n    this.generateTodoEl = generateTodoEl;\n    this.#registerApp(appId);\n    this.#registerComponents(classNames);\n    this.#renderRemainCount();\n  }\n\n  active() {\n    this.#attachAddHandlers();\n    this.#attachDeleteHandler();\n    this.#attachClearAllHandler();\n  }\n\n  #registerApp(appId) {\n    this.$app = document.getElementById(appId);\n\n    if (!this.$app) {\n      this.#exception({\n        type: 'APP_NOT_FOUND',\n        payload: { id: appId },\n      });\n    }\n  }\n\n  #registerComponents(classNames) {\n    const excepts = new Set(['$todo', '$deleteButton']);\n\n    Object.entries(classNames).forEach(([fieldName, /*String*/ className]) => {\n      if (excepts.has(fieldName)) return;\n\n      const node = this.$app.querySelector(`.${className}`);\n\n      if (!node) {\n        this.#exception({\n          type: 'NODE_NOT_FOUND',\n          payload: { className },\n        });\n      }\n\n      this[fieldName] = node;\n    });\n  }\n\n  #renderRemainCount() {\n    this.$remainCount.textContent = `${this.$todos.children.length}`;\n  }\n\n  #attachAddHandlers() {\n    const add = () => {\n      const content = this.$addInput.value.trim();\n      if (!content) return;\n\n      const todo = this.generateTodoEl(content);\n      this.$todos.insertBefore(todo, this.$todos.children[0]);\n\n      this.$addInput.value = '';\n      this.#renderRemainCount();\n    };\n\n    this.$addButton.addEventListener('click', add);\n    this.$addInput.addEventListener('keydown', e => {\n      if (e.key === 'Enter' && !e.isComposing) {\n        add();\n      }\n    });\n  }\n  #attachDeleteHandler() {\n    this.$todos.addEventListener('click', ({ target }) => {\n      if (!target.classList.contains(this.classNames.$deleteButton)) return;\n\n      const todo = target.closest(`.${this.classNames.$todo}`);\n      if (!todo) return;\n\n      todo.remove();\n      this.#renderRemainCount();\n    });\n  }\n\n  #attachClearAllHandler() {\n    this.$clearButton.addEventListener('click', () => {\n      this.$todos.innerHTML = '';\n      this.$addInput.value = '';\n      this.#renderRemainCount();\n    });\n  }\n\n  #exception({ type, payload }) {\n    switch (type) {\n      case 'APP_NOT_FOUND': {\n        throw new Error(`App node that maps to id \"${payload.id}\" not found.`);\n      }\n      case 'NODE_NOT_FOUND': {\n        throw new Error(`Component node that maps to className \"${payload.className}\" not found.`);\n      }\n    }\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  /** @type {ClassNames} */\n  const classNames = {\n    $todos: 'todos',\n    $todo: 'todo',\n    $addButton: 'add-button',\n    $addInput: 'add-input',\n    $deleteButton: 'delete-button',\n    $clearButton: 'clear-button',\n    $remainCount: 'remain-tasks-count',\n  };\n\n  /** @type {generateTodoEl} */\n  const generateTodoEl = content => {\n    const li = document.createElement('li');\n    li.className = classNames.$todo;\n\n    const p = document.createElement('p');\n    p.textContent = content;\n\n    const button = document.createElement('button');\n    button.className = classNames.$deleteButton;\n\n    li.append(p, button);\n    return li;\n  };\n\n  const todoApp = new TodoApp('todoApp', classNames, generateTodoEl);\n  todoApp.active();\n});\n"]}